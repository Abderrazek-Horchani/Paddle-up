"use strict";(()=>{var e={};e.id=776;e.ids=[776];e.modules={2898:(e,t,r)=>{r.r(t);r.d(t,{config:()=>c,"default":()=>u,routeModule:()=>l});var o={};r.r(o);r.d(o,{"default":()=>a});var n=r(3480);var s=r(8667);var i=r(6435);async function a(e,t){if(e.method!=="POST"){return t.status(405).json({error:"Method Not Allowed"})}const{name:r,whatsapp:o,email:n,kayakQuantity:s,paddleQuantity:i,selectedDuration:a,bookingDate:u,bookingTime:c,totalPrice:l}=e.body;const d=process.env.GRIST_DOC_ID;const f=process.env.GRIST_API_KEY;const P=process.env.GRIST_TABLE_ID;if(!d||!f||!P){console.error("Grist API details are not configured on the server.");return t.status(500).json({error:"Server configuration error: Grist API details missing."})}const p={Name:r,Whatsapp:o,Email:n||"",Kayak_Quantity:s,Paddle_Quantity:i,Duration:a==="full"?"Full Day":`${a} hours`,Booking_Date:u||"",Booking_Time:c||"",Total_Price:Math.round(parseFloat(l)),Status:"Pending",Created_At:new Date().toISOString()};try{const e=await fetch(`https://docs.getgrist.com/api/docs/${d}/tables/${P}/records`,{method:"POST",headers:{"Authorization":`Bearer ${f}`,"Content-Type":"application/json"},body:JSON.stringify({records:[{fields:p}]})});if(!e.ok){const r=await e.text();console.error("Grist API Error Response:",e.status,r);return t.status(e.status).json({error:`Grist API error: ${e.statusText}`})}const r=await e.json();console.log("Booking saved successfully in Grist:",r);return t.status(200).json({message:"Booking request sent successfully!"})}catch(e){console.error("Error submitting booking to Grist:",e);return t.status(500).json({error:"Error submitting booking."})}};const u=(0,i.M)(o,"default");const c=(0,i.M)(o,"config");const l=new n.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/book",pathname:"/api/book",bundlePath:"",filename:""},userland:o})},3480:(e,t,r)=>{if(false){}else{if(false){}else{if(false){}else{e.exports=r(5600)}}}},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,t)=>{var r;r={value:true};Object.defineProperty(t,"M",{enumerable:true,get:function(){return o}});function o(e,t){if(t in e){return e[t]}if("then"in e&&typeof e.then==="function"){return e.then(e=>o(e,t))}if(typeof e==="function"&&t==="default"){return e}return undefined}},8667:(e,t)=>{var r;r={value:true};Object.defineProperty(t,"A",{enumerable:true,get:function(){return o}});var o=function(e){e["PAGES"]="PAGES";e["PAGES_API"]="PAGES_API";e["APP_PAGE"]="APP_PAGE";e["APP_ROUTE"]="APP_ROUTE";e["IMAGE"]="IMAGE";return e}({})}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=e=>t(t.s=e);var o=r(2898);module.exports=o})();